{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2 class="mb-4 text-white">Друзі</h2>

    {% if message %}
    <div class="alert alert-info">{{ message }}</div>
    {% endif %}

    <!-- Пошук користувача -->
    <form method="POST" class="mb-4 d-flex flex-wrap">
        <input type="text" name="search_name" class="form-control me-2 mb-2" placeholder="Ім'я користувача" required>
        <button type="submit" name="search" class="btn btn-success mb-2">Пошук</button>
    </form>

    {% if search_result %}
    <div class="friend-card d-flex justify-content-between align-items-center mb-3 p-3">
        <span>{{ search_result }}</span>
        <form method="POST" class="mb-0">
            <input type="hidden" name="target" value="{{ search_result }}">
            <button type="submit" name="add_friend" class="btn btn-primary">Додати в друзі</button>
        </form>
    </div>
    {% endif %}

    <hr class="border-secondary">

    <h4 class="text-white mb-3">Мої друзі</h4>
    {% if friends %}
    <div class="row">
        {% for f in friends %}
        <div class="col-md-4 col-sm-6 mb-3">
            <div class="friend-card p-3 text-center">{{ f }}</div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-white">У вас поки що немає друзів.</p>
    {% endif %}

    <hr class="border-secondary">

    <h4 class="text-white mb-3">Запрошення в друзі</h4>
    {% if requests %}
    <div class="row">
        {% for r in requests %}
        <div class="col-md-4 col-sm-6 mb-3">
            <div class="friend-card d-flex justify-content-between align-items-center p-3">
                <span>{{ r }}</span>
                <form method="POST" class="mb-0">
                    <input type="hidden" name="sender" value="{{ r }}">
                    <button type="submit" name="accept" class="btn btn-success">Прийняти</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-white">Немає нових запрошень.</p>
    {% endif %}
</div>
{% endblock %}
